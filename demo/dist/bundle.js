var se=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(n,t)=>(typeof require<"u"?require:n)[t]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});import Ce from"react";import{createRoot as _e}from"react-dom/client";function J({latency:e=120}={}){let n={"/":{title:"Home",pageData:{blurb:"Welcome to the demo."}},"/about":{title:"About",pageData:{blurb:"This is a mock backend."}}},t=/^\/users\/([^/]+)$/;globalThis.fetch=async r=>{let a=new URL(r,location.origin).pathname,o=200,m=n[a];if(!m){let s=a.match(t);if(s){let c=s[1];m={title:`User ${c}`,pageData:{id:c,role:"tester"}}}}return m||(o=404,m={title:"Not Found",pageData:{path:a}}),await new Promise(s=>setTimeout(s,e)),{status:o,json:async()=>m}}}import _ from"react";function N(){return N=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},N.apply(this,arguments)}var L;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(L||(L={}));var G=function(e){return e};var B="beforeunload";var ue="popstate";function Y(e){e===void 0&&(e={});var n=e,t=n.window,r=t===void 0?document.defaultView:t,i=r.history;function a(){var l=r.location,d=l.pathname,v=l.search,A=l.hash,E=i.state||{};return[E.idx,G({pathname:d,search:v,hash:A,state:E.usr||null,key:E.key||"default"})]}var o=null;function m(){if(o)g.call(o),o=null;else{var l=L.Pop,d=a(),v=d[0],A=d[1];if(g.length){if(v!=null){var E=f-v;E&&(o={action:l,location:A,retry:function(){k(E*-1)}},k(E))}}else D(l)}}r.addEventListener(ue,m);var s=L.Pop,c=a(),f=c[0],p=c[1],u=W(),g=W();f==null&&(f=0,i.replaceState(N({},i.state,{idx:f}),""));function y(l){return typeof l=="string"?l:fe(l)}function x(l,d){return d===void 0&&(d=null),G(N({pathname:p.pathname,hash:"",search:""},typeof l=="string"?pe(l):l,{state:d,key:le()}))}function w(l,d){return[{usr:l.state,key:l.key,idx:d},y(l)]}function O(l,d,v){return!g.length||(g.call({action:l,location:d,retry:v}),!1)}function D(l){s=l;var d=a();f=d[0],p=d[1],u.call({action:s,location:p})}function b(l,d){var v=L.Push,A=x(l,d);function E(){b(l,d)}if(O(v,A,E)){var P=w(A,f+1),U=P[0],M=P[1];try{i.pushState(U,"",M)}catch{r.location.assign(M)}D(v)}}function C(l,d){var v=L.Replace,A=x(l,d);function E(){C(l,d)}if(O(v,A,E)){var P=w(A,f),U=P[0],M=P[1];i.replaceState(U,"",M),D(v)}}function k(l){i.go(l)}var j={get action(){return s},get location(){return p},createHref:y,push:b,replace:C,go:k,back:function(){k(-1)},forward:function(){k(1)},listen:function(d){return u.push(d)},block:function(d){var v=g.push(d);return g.length===1&&r.addEventListener(B,z),function(){v(),g.length||r.removeEventListener(B,z)}}};return j}function z(e){e.preventDefault(),e.returnValue=""}function W(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter(function(r){return r!==t})}},call:function(t){e.forEach(function(r){return r&&r(t)})}}}function le(){return Math.random().toString(36).substr(2,8)}function fe(e){var n=e.pathname,t=n===void 0?"/":n,r=e.search,i=r===void 0?"":r,a=e.hash,o=a===void 0?"":a;return i&&i!=="?"&&(t+=i.charAt(0)==="?"?i:"?"+i),o&&o!=="#"&&(t+=o.charAt(0)==="#"?o:"#"+o),t}function pe(e){var n={};if(e){var t=e.indexOf("#");t>=0&&(n.hash=e.substr(t),e=e.substr(0,t));var r=e.indexOf("?");r>=0&&(n.search=e.substr(r),e=e.substr(0,r)),e&&(n.pathname=e)}return n}var q=typeof window<"u"&&window.document&&window.document.createElement?Y():null;var $=q;var X="scroll",de=()=>({y:window.pageYOffset||document.documentElement.scrollTop||0,x:window.pageXOffset||document.documentElement.scrollLeft||0}),he=()=>{let{pathname:e,search:n}=window.location;return`${e}${n||""}`},Q=()=>{if(typeof sessionStorage>"u")return{};try{let e=sessionStorage.getItem(X);return e?JSON.parse(e):{}}catch{return{}}},me=e=>{if(!(typeof sessionStorage>"u"))try{sessionStorage.setItem(X,JSON.stringify(e))}catch{}},Z=()=>{let e=Q();e[he()]=de(),me(e)};var ee=(e="*")=>{let n=Q();return e==="*"?n:n[e]||null};import I from"react";function ye(e){let n=[],t=0;for(;t<e.length;){let r=e[t];if(r==="*"||r==="+"||r==="?"){n.push({type:"MODIFIER",index:t,value:e[t++]});continue}if(r==="\\"){n.push({type:"ESCAPED_CHAR",index:t++,value:e[t++]});continue}if(r==="{"){n.push({type:"OPEN",index:t,value:e[t++]});continue}if(r==="}"){n.push({type:"CLOSE",index:t,value:e[t++]});continue}if(r===":"){let i="",a=t+1;for(;a<e.length;){let o=e.charCodeAt(a);if(o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122||o===95){i+=e[a++];continue}break}if(!i)throw new TypeError(`Missing parameter name at ${t}`);n.push({type:"NAME",index:t,value:i}),t=a;continue}if(r==="("){let i=1,a="",o=t+1;if(e[o]==="?")throw new TypeError(`Pattern cannot start with "?" at ${o}`);for(;o<e.length;){if(e[o]==="\\"){a+=e[o++]+e[o++];continue}if(e[o]===")"){if(i--,i===0){o++;break}}else if(e[o]==="("&&(i++,e[o+1]!=="?"))throw new TypeError(`Capturing groups are not allowed at ${o}`);a+=e[o++]}if(i)throw new TypeError(`Unbalanced pattern at ${t}`);if(!a)throw new TypeError(`Missing pattern at ${t}`);n.push({type:"PATTERN",index:t,value:a}),t=o;continue}n.push({type:"CHAR",index:t,value:e[t++]})}return n.push({type:"END",index:t,value:""}),n}function ge(e,n={}){let t=ye(e),{prefixes:r="./",delimiter:i="/#?"}=n,a=[],o=0,m=0,s="",c=y=>{if(m<t.length&&t[m].type===y)return t[m++].value},f=y=>{let x=c(y);if(x!==void 0)return x;let{type:w,index:O}=t[m];throw new TypeError(`Unexpected ${w} at ${O}, expected ${y}`)},p=()=>{let y="",x;for(;x=c("CHAR")||c("ESCAPED_CHAR");)y+=x;return y},u=y=>{for(let x of i)if(y.indexOf(x)>-1)return!0;return!1},g=y=>{let x=a[a.length-1],w=y||(x&&typeof x=="string"?x:"");if(x&&!w)throw new TypeError(`Must have text between two parameters, missing text after "${x.name}"`);return!w||u(w)?`[^${S(i)}]+?`:`(?:(?!${S(w)})[^${S(i)}])+?`};for(;m<t.length;){let y=c("CHAR"),x=c("NAME"),w=c("PATTERN");if(x||w){let b=y||"";r.indexOf(b)===-1&&(s+=b,b=""),s&&(a.push(s),s=""),a.push({name:x||o++,prefix:b,suffix:"",pattern:w||g(b),modifier:c("MODIFIER")||""});continue}let O=y||c("ESCAPED_CHAR");if(O){s+=O;continue}if(s&&(a.push(s),s=""),c("OPEN")){let b=p(),C=c("NAME")||"",k=c("PATTERN")||"",j=p();f("CLOSE"),a.push({name:C||(k?o++:""),pattern:C&&!k?g(b):k,prefix:b,suffix:j,modifier:c("MODIFIER")||""});continue}f("END")}return a}function te(e,n){let t=[],r=re(e,t,n);return xe(r,t,n)}function xe(e,n,t={}){let{decode:r=i=>i}=t;return function(i){let a=e.exec(i);if(!a)return!1;let{0:o,index:m}=a,s=Object.create(null);for(let c=1;c<a.length;c++){if(a[c]===void 0)continue;let f=n[c-1];f.modifier==="*"||f.modifier==="+"?s[f.name]=a[c].split(f.prefix+f.suffix).map(p=>r(p,f)):s[f.name]=r(a[c],f)}return{path:o,index:m,params:s}}}function S(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function ne(e){return e&&e.sensitive?"":"i"}function ve(e,n){if(!n)return e;let t=/\((?:\?<(.*?)>)?(?!\?)/g,r=0,i=t.exec(e.source);for(;i;)n.push({name:i[1]||r++,prefix:"",suffix:"",modifier:"",pattern:""}),i=t.exec(e.source);return e}function we(e,n,t){let r=e.map(i=>re(i,n,t).source);return new RegExp(`(?:${r.join("|")})`,ne(t))}function be(e,n,t){return Ee(ge(e,t),n,t)}function Ee(e,n,t={}){let{strict:r=!1,start:i=!0,end:a=!0,encode:o=u=>u,delimiter:m="/#?",endsWith:s=""}=t,c=`[${S(s)}]|$`,f=`[${S(m)}]`,p=i?"^":"";for(let u of e)if(typeof u=="string")p+=S(o(u));else{let g=S(o(u.prefix)),y=S(o(u.suffix));if(u.pattern)if(n&&n.push(u),g||y)if(u.modifier==="+"||u.modifier==="*"){let x=u.modifier==="*"?"?":"";p+=`(?:${g}((?:${u.pattern})(?:${y}${g}(?:${u.pattern}))*)${y})${x}`}else p+=`(?:${g}(${u.pattern})${y})${u.modifier}`;else{if(u.modifier==="+"||u.modifier==="*")throw new TypeError(`Can not repeat "${u.name}" without a prefix and suffix`);p+=`(${u.pattern})${u.modifier}`}else p+=`(?:${g}${y})${u.modifier}`}if(a)r||(p+=`${f}?`),p+=t.endsWith?`(?=${c})`:"$";else{let u=e[e.length-1],g=typeof u=="string"?f.indexOf(u[u.length-1])>-1:u===void 0;r||(p+=`(?:${f}(?=${c}))?`),g||(p+=`(?=${f}|${c})`)}return new RegExp(p,ne(t))}function re(e,n,t){return e instanceof RegExp?ve(e,n):Array.isArray(e)?we(e,n,t):be(e,n,t)}var $e=()=>I.createElement("div",{style:{padding:24}},I.createElement("h1",null,"404"),I.createElement("p",null,"Page not found")),Te=(e,n)=>{for(let t of e){let r=t.matcher(n);if(r)return{route:t,params:r.params||{}}}return null},R={match:(e,n)=>{let t=Te(e,n);if(!t)return{Component:$e,reducerKey:null,params:{}};let{route:r,params:i}=t,{Component:a,reducerKey:o}=r;return{Component:a,reducerKey:o,params:i}},prepare:e=>Object.keys(e).map(n=>{let t=e[n],r,i;return Array.isArray(t)?[r,i]=t:r=t,{path:n,matcher:te(n,{decode:decodeURIComponent}),Component:r,reducerKey:i||null}})};var ke=()=>{if(typeof globalThis<"u"&&globalThis.crypto){if(typeof globalThis.crypto.randomUUID=="function")return globalThis.crypto.randomUUID();let e=new Uint8Array(16);globalThis.crypto.getRandomValues(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;let n=[...e].map(t=>t.toString(16).padStart(2,"0"));return`${n.slice(0,4).join("")}-${n.slice(4,6).join("")}-${n.slice(6,8).join("")}-${n.slice(8,10).join("")}-${n.slice(10).join("")}`}try{let{randomUUID:e}=se("node:crypto");if(typeof e=="function")return e()}catch{}return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let n=Math.random()*16|0;return(e==="x"?n:n&3|8).toString(16)})},oe=Symbol.for("handleHistoryChange:installed"),H=null;function Ae(){try{if(typeof window<"u"&&window.location&&window.location.origin)return window.location.origin}catch{}return"http://localhost"}function Se(e){let n=new URL((e.pathname||"/")+(e.search||""),Ae());return n.searchParams.set("uuid",ke()),n.toString()}function Oe(e){return e===404?"404":Math.floor(e/100)===5?"5xx":"ok"}function F(e,{history:n,fetchImpl:t=typeof fetch<"u"&&fetch||null,setTitle:r=function(a){typeof document<"u"&&a&&(document.title=a)},progress:i={start(){},done(){}}}={}){!n||!t||n[oe]||(n[oe]=!0,n.listen(function({location:a,action:o}){if(H&&typeof H.abort=="function")try{H.abort()}catch{}H=typeof AbortController<"u"?new AbortController:null,i&&typeof i.done=="function"&&i.done(),i&&typeof i.start=="function"&&i.start();let m=Se(a);Promise.resolve(t(m,{method:"GET",headers:{Accept:"application/json"},signal:H?H.signal:void 0})).then(function(s){let c=s&&s.json?s.json():{};return Promise.resolve(c).then(function(f){return{status:s?s.status:503,data:f||{}}}).catch(function(){return{status:s?s.status:503,data:{}}})}).catch(function(s){return{status:503,data:{}}}).then(function({status:s,data:c}){i&&typeof i.done=="function"&&i.done();let f=c&&c.authorization&&c.authorization.location,p=f||a.pathname||"/";if(!f){let u=Oe(s);u==="404"?p="/404":u==="5xx"&&(p="/500")}if(e({type:"CHANGE_PAGE",data:Object.assign({},c,{location:p})}),c&&c.title&&r(c.title),typeof window<"u"&&window.scrollTo)if(o==="PUSH")window.scrollTo(0,0);else{let u=(a.pathname||"/")+(a.search||""),g=ee(u);g&&setTimeout(function(){window.scrollTo(g.x||0,g.y||0)},250)}})}))}var ie=!1,T=({to:e,className:n,children:t,mode:r="push",onMouseEnter:i,onMouseLeave:a,style:o={},...m})=>_.createElement("a",{href:e,className:n,onClick:c=>{c.defaultPrevented||c.button!==0||c.metaKey||c.ctrlKey||c.altKey||c.shiftKey||(c.preventDefault(),Z(),$&&(r==="replace"?$.replace(e):$.push(e)))},onMouseEnter:i,onMouseLeave:a,style:o,...m},t);var V=(e,n,t={})=>{let r=R.prepare(e);return()=>{let[a,o]=_.useReducer(n,{...t,location:$&&$.location.pathname+($.location.search||"")||"/"});_.useEffect(()=>{if(!$)return;let f=$.listen(({location:p})=>{let u=p.pathname+(p.search||"");o({type:"LOCATION_CHANGED",location:u})});return o({type:"LOCATION_CHANGED",location:$.location.pathname+($.location.search||"")}),()=>f()},[]),_.useEffect(()=>{!ie&&o&&(F(o),ie=!0)},[o]);let m=(a.location||"/").split("?",1)[0],{Component:s,params:c}=R.match(r,m);return _.createElement(s,{...a,params:c,dispatch:o})}};import h from"react";var Pe=e=>h.createElement("div",{style:{padding:24}},h.createElement("h1",null,"Home"),h.createElement("p",null,"This is a tiny demo using the modernized router."),h.createElement("nav",{style:{display:"flex",gap:12}},h.createElement(T,{to:"/"},"Home"),h.createElement(T,{to:"/about"},"About"),h.createElement(T,{to:"/users/42"},"User 42")),h.createElement("pre",{style:{background:"#f6f8fa",padding:12,marginTop:16}},JSON.stringify({state:e},null,2))),Ne=e=>h.createElement("div",{style:{padding:24}},h.createElement("h1",null,"About"),h.createElement("p",null,"Try navigating with modifier keys to open in a new tab."),h.createElement("nav",{style:{display:"flex",gap:12}},h.createElement(T,{to:"/"},"Home"),h.createElement(T,{to:"/about"},"About"),h.createElement(T,{to:"/users/123"},"User 123")),h.createElement("pre",{style:{background:"#f6f8fa",padding:12,marginTop:16}},JSON.stringify({state:e},null,2))),Le=({params:e,...n})=>h.createElement("div",{style:{padding:24}},h.createElement("h1",null,"User"),h.createElement("p",null,"User ID: ",h.createElement("strong",null,e.id)),h.createElement("nav",{style:{display:"flex",gap:12}},h.createElement(T,{to:"/"},"Home"),h.createElement(T,{to:"/about"},"About")),h.createElement("pre",{style:{background:"#f6f8fa",padding:12,marginTop:16}},JSON.stringify({params:e,state:n},null,2))),He={"/":Pe,"/about":Ne,"/users/:id":Le},ae=He;var ce={location:"/",title:"Demo",pageData:{}};function K(e,n){switch(n.type){case"LOCATION_CHANGED":return{...e,location:n.location};case"CHANGE_PAGE":{let t={...e,...n.data};return n.data&&n.data.location&&(t.location=n.data.location),t}default:return e}}J();var De=V(ae,K,ce),Me=_e(document.getElementById("root"));Me.render(Ce.createElement(De,null));
